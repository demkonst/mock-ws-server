# Mock WebSocket Server

–°–µ—Ä–≤–µ—Ä –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–∏–º—É–ª—è—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤** —á–µ—Ä–µ–∑ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–°–∏–º—É–ª—è—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤** —á–µ—Ä–µ–∑ HTTP POST –∑–∞–ø—Ä–æ—Å—ã
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π** (dev, demo, stage)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** —Å —É—á—ë—Ç–æ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏** —á–µ—Ä–µ–∑ REST API
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏** —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

## –ó–∞–ø—É—Å–∫

```bash
node server.js
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000.

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000/api-docs

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

## API Endpoints

### POST /run
–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏/–∏–ª–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `env` (string) - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (dev, demo, stage)
- `operators` (array) - –º–∞—Å—Å–∏–≤ –∏–º—ë–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- `vehicles` (array) - –º–∞—Å—Å–∏–≤ –∏–º—ë–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- `speed` (number) - —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –≤ –º/—Å (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞)
- `duration` (number) - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300)
- `notifications` (boolean) - –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `allOperators` (boolean) - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `allVehicles` (boolean) - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `vehicleCoords` (object) - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{"vehicle_name": [{"lat": 58.03256597, "lon": 106.54683029}, ...]}`
- `operatorCoords` (object) - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{"operator_name": [[lon, lat], [lon, lat], ...]}`

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev"}'

# –ó–∞–ø—É—Å–∫ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev", "vehicles": ["11", "12"]}'

# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev", "vehicles": ["11", "12"], "speed": 15}'

# –ó–∞–ø—É—Å–∫ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev", "notifications": true}'

# –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{
    "env": "dev", 
    "vehicles": ["custom_route"], 
    "speed": 8,
    "vehicleCoords": {
      "custom_route": [
        {"lat": 58.03256597, "lon": 106.54683029},
        {"lat": 58.03409, "lon": 106.5384},
        {"lat": 58.03890375, "lon": 106.53784625}
      ]
    }
  }'

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev"}'
```

### GET /status
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `env` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (dev, demo, stage). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
curl http://localhost:3000/status

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
curl "http://localhost:3000/status?env=dev"
```

**–û—Ç–≤–µ—Ç—ã:**

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å (–º–∞—Å—Å–∏–≤ –æ–∫—Ä—É–∂–µ–Ω–∏–π):**
```json
[
  { "env": "dev", "status": "running" },
  { "env": "demo", "status": "stopped" },
  { "env": "stage", "status": "running" }
]
```

**–°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ç—É—Å):**
```json
{ "status": "running" }
```

### POST /stop
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `env` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (dev, demo, stage). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
curl -X POST http://localhost:3000/stop

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
curl -X POST http://localhost:3000/stop \
  -H "Content-Type: application/json" \
  -d '{"env": "dev"}'
```

## –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–µ–∂–¥—É –∑–∞–¥–∞–Ω–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞ —Å —É—á—ë—Ç–æ–º —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏:

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏:
1. **–ü–∞—Ä–∞–º–µ—Ç—Ä `speed` –≤ –∑–∞–ø—Ä–æ—Å–µ** - –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **–ü–∞—Ä–∞–º–µ—Ç—Ä `speed` –≤ JSON —Ñ–∞–π–ª–µ** - —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
3. **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (10 –º/—Å)** - –Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

- **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (waypoints) –≤ JSON —Ñ–∞–π–ª–∞—Ö
- **–ê–ª–≥–æ—Ä–∏—Ç–º:** –ª–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Å —Ä–∞—Å—á—ë—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é

**–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞:**
```json
{
  "client": 632295,
  "moving": true,
  "speed": 10,
  "coords": [
    {"lat": 58.03256597, "lon": 106.54683029},
    {"lat": 58.03409, "lon": 106.5384},
    {"lat": 58.03890375, "lon": 106.53784625}
  ]
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

–ü–æ–º–∏–º–æ —á—Ç–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –Ω–∞–ø—Ä—è–º—É—é –≤ –∑–∞–ø—Ä–æ—Å–µ `/run` —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `vehicleCoords` –∏ `operatorCoords`. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**
1. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞** - –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ JSON —Ñ–∞–π–ª–æ–≤** - –Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –Ω–∏–∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`operators`, `vehicles`, `allOperators`, `allVehicles`, `vehicleCoords`, `operatorCoords`), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

#### –î–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (`vehicleCoords`)

**1. –ü—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π client ID = 999999):**
```json
{
  "vehicleCoords": {
    "vehicle_name": [
      [106.54683029, 58.03256597],
      [106.5384, 58.03409],
      [106.53784625, 58.03890375]
    ]
  }
}
```

**2. –û–±—ä–µ–∫—Ç —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ client ID:**
```json
{
  "vehicleCoords": {
    "vehicle_name": {
      "coords": [
        [106.54683029, 58.03256597],
        [106.5384, 58.03409],
        [106.53784625, 58.03890375]
      ],
      "client": 123456,
      "speed": 15,
      "interpolate": true
    }
  }
}
```

**–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤:**
- `speed` (number) - —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –º/—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –º/—Å)
- `interpolate` (boolean) - –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

#### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`operatorCoords`)

**1. –ü—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è):**
```json
{
  "operatorCoords": {
    "operator_name": [
      [106.54683029, 58.03256597],
      [106.5384, 58.03409],
      [106.53784625, 58.03890375]
    ]
  }
}
```

**2. –û–±—ä–µ–∫—Ç —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ operator_id:**
```json
{
  "operatorCoords": {
    "operator_name": {
      "coords": [
        [106.54683029, 58.03256597],
        [106.5384, 58.03409],
        [106.53784625, 58.03890375]
      ],
      "operator_id": 123456,
      "speed": 60,
      "course": 45,
      "altitude": 15,
      "delay": 3000,
      "interpolate": true
    }
  }
}
```

**–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:**
- `speed` (number) - —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –∫–º/—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 40)
- `course` (number) - –∫—É—Ä—Å –≤ –≥—Ä–∞–¥—É—Å–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 90)
- `altitude` (number) - –≤—ã—Å–æ—Ç–∞ –≤ –º–µ—Ç—Ä–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `delay` (number) - –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2000)
- `interpolate` (boolean) - –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `operator_id` —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å `/api/units/operators/credentials?operator_id={{operator_id}}`
2. –ü–æ–ª—É—á–∞–µ—Ç credentials (login/password)
3. –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å `/api/units/auth/operator/login` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    {"lat": 58.03890375, "lon": 106.53784625}
  ]
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∞–π–ª–∞:**
- `client` (number) - ID –∫–ª–∏–µ–Ω—Ç–∞
- `moving` (boolean) - —Å—Ç–∞—Ç—É—Å –¥–≤–∏–∂–µ–Ω–∏—è
- `speed` (number) - —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –º/—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –º/—Å)
- `coords` (array) - –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–∞—Ä—à—Ä—É—Ç–∞

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Ñ–∞–π–ª–∞—Ö:**

**1. –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ–±—ä–µ–∫—Ç):**
```json
{
  "client": 632295,
  "moving": true,
  "speed": 10,
  "coords": [
    {"lat": 58.03256597, "lon": 106.54683029},
    {"lat": 58.03409, "lon": 106.5384}
  ]
}
```

**2. –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤):**
```json
{
  "client": 999888,
  "moving": true,
  "speed": 8,
  "coords": [
    [106.54683029, 58.03256597],
    [106.5384, 58.03409]
  ]
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –º–∞—Å—Å–∏–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–¥—É—Ç –≤ –ø–æ—Ä—è–¥–∫–µ `[lon, lat]` (–¥–æ–ª–≥–æ—Ç–∞, —à–∏—Ä–æ—Ç–∞).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
mock-ws-server/
‚îú‚îÄ‚îÄ operators_<env>/          # –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ operator_01.json     # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ operator_02.json     # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ operator_new_format.json # –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (waypoints)
‚îú‚îÄ‚îÄ vehicles_<env>/           # –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ vehicle_11.json      # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ vehicle_12.json      # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
‚îÇ   ‚îî‚îÄ‚îÄ vehicle_new_format.json # –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
‚îú‚îÄ‚îÄ .env.<env>               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ server.js                # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ operator.js              # –õ–æ–≥–∏–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ vehicle.js               # –õ–æ–≥–∏–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
‚îî‚îÄ‚îÄ vehicleRunner.js         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏
```

## –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π)
```json
[
  {
    "payload": {
      "lat": 58.03256597,
      "lon": 106.54683029,
      "timestamp": 1753387738,
      "speed": 40,
      "speed_accuracy": 1,
      "course": 90,
      "course_accuracy": 5,
      "altitude": 10,
      "altitude_accuracy": 2
    },
    "delay": 2000
  }
]
```

### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (waypoints)
```json
{
  "waypoints": [
    [106.54683029, 58.03256597],
    [106.5384, 58.03409],
    [106.53784625, 58.03890375]
  ],
  "speed": 40,
  "course": 90,
  "altitude": 10,
  "delay": 2000,
  "interpolate": true
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –º–∞—Å—Å–∏–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–¥—É—Ç –≤ –ø–æ—Ä—è–¥–∫–µ `[lon, lat]` (–¥–æ–ª–≥–æ—Ç–∞, —à–∏—Ä–æ—Ç–∞).

**–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:** 
- `"interpolate": true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –º–µ–∂–¥—É waypoints –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∑–∞–¥–µ—Ä–∂–∫–∏
- `"interpolate": false` - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ waypoints –±–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ç–æ—á–µ–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ï—Å–ª–∏ —É –≤–∞—Å –º–∞—Ä—à—Ä—É—Ç—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–æ—á–∫–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `"interpolate": false`.

## –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤

### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
```json
{
  "client": 999888,
  "moving": true,
  "speed": 8,
  "coords": [
    { "lat": 58.03256597, "lon": 106.54683029 },
    { "lat": 58.03409, "lon": 106.5384 },
    { "lat": 58.03890375, "lon": 106.53784625 }
  ]
}
```

### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (waypoints)
```json
{
  "client": 999888,
  "moving": true,
  "speed": 8,
  "interpolate": true,
  "coords": [
    [106.54683029, 58.03256597],
    [106.5384, 58.03409],
    [106.53784625, 58.03890375]
  ]
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –º–∞—Å—Å–∏–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–¥—É—Ç –≤ –ø–æ—Ä—è–¥–∫–µ `[lon, lat]` (–¥–æ–ª–≥–æ—Ç–∞, —à–∏—Ä–æ—Ç–∞).

**–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:** 
- `"interpolate": true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –º–µ–∂–¥—É waypoints –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∑–∞–¥–µ—Ä–∂–∫–∏
- `"interpolate": false` - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ waypoints –±–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ç–æ—á–µ–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ï—Å–ª–∏ —É –≤–∞—Å –º–∞—Ä—à—Ä—É—Ç—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–æ—á–∫–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `"interpolate": false`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã `.env.dev`, `.env.demo`, `.env.stage` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

```env
# –ë–∞–∑–æ–≤—ã–µ URL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
BASE_URL_CONNECTOR=https://your-domain.com/api/connector/
BASE_URL_COLLECTOR=https://your-domain.com/api/collector/
BASE_URL_UNITS=https://your-domain.com/api/units/
BASE_URL_STREAMER=https://your-domain.com/api/streamer/
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

- **BASE_URL_CONNECTOR** - URL –¥–ª—è connector —Å–µ—Ä–≤–∏—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤)
- **BASE_URL_COLLECTOR** - URL –¥–ª—è collector —Å–µ—Ä–≤–∏—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
- **BASE_URL_UNITS** - URL –¥–ª—è units —Å–µ—Ä–≤–∏—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ —Å–º–µ–Ω–∞–º–∏)
- **BASE_URL_STREAMER** - URL –¥–ª—è streamer —Å–µ—Ä–≤–∏—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ–Ω
2. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–º–µ–Ω –ø–æ–ª—É—á–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã
3. –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ —Å–º–µ–Ω—ã –Ω–∞ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ñ–ª–∞–≥–∞ `notifications: true`:
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `/stop`

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- `üîÑ [Interpolation]` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- `üì§ [Vehicle]` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞
- `‚úÖ [Vehicle]` - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- `‚ùå [Vehicle]` - –æ—à–∏–±–∫–∏
- `üõë` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ 