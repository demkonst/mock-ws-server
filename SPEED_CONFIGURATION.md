# Настройка скорости транспортных средств

## Обзор

Система поддерживает гибкую настройку скорости движения транспортных средств через несколько способов с чёткой иерархией приоритетов.

## Способы настройки скорости

### 1. Параметр в JSON файле (рекомендуется)

Добавьте параметр `speed` в JSON файл транспортного средства:

```json
{
  "client": 632295,
  "moving": true,
  "speed": 8,
  "coords": [
    {"lat": 58.03256597, "lon": 106.54683029},
    {"lat": 58.03409, "lon": 106.5384},
    {"lat": 58.03890375, "lon": 106.53784625}
  ]
}
```

**Преимущества:**
- Индивидуальная настройка для каждого транспортного средства
- Постоянная конфигурация
- Легко управлять через файлы

### 2. Параметр в API запросе

Передайте `speed` в теле запроса для переопределения файлового значения:

```bash
curl -X POST http://localhost:3000/run \
  -H "Content-Type: application/json" \
  -d '{"env": "dev", "vehicles": ["11"], "speed": 15}'
```

**Преимущества:**
- Временное переопределение
- Гибкость для тестирования
- Возможность изменения скорости без редактирования файлов

### 3. Значение по умолчанию

Если скорость не указана ни в файле, ни в запросе, используется значение **10 м/с (36 км/ч)**.

## Иерархия приоритетов

1. **Высший приоритет:** `speed` в API запросе
2. **Средний приоритет:** `speed` в JSON файле
3. **Низший приоритет:** Значение по умолчанию (10 м/с)

## Примеры использования

### Файл с указанием скорости
```json
{
  "client": 999999,
  "moving": true,
  "speed": 5,
  "coords": [...]
}
```
→ Используется скорость 5 м/с (18 км/ч)

### Файл без указания скорости
```json
{
  "client": 777777,
  "moving": true,
  "coords": [...]
}
```
→ Используется скорость по умолчанию 10 м/с (36 км/ч)

### Запрос с переопределением
```bash
curl -X POST http://localhost:3000/run \
  -d '{"env": "dev", "vehicles": ["test"], "speed": 20}'
```
→ Используется скорость 20 м/с (72 км/ч) независимо от файла

## Влияние скорости на интерполяцию

Скорость влияет на количество промежуточных точек:

| Скорость | Время прохождения | Точки | Описание |
|----------|-------------------|-------|----------|
| 2 м/с | 262с | 534 | Медленное движение |
| 5 м/с | 105с | 215 | Средняя скорость |
| 10 м/с | 52с | 109 | Стандартная скорость |
| 20 м/с | 26с | 56 | Быстрое движение |

## Логирование

Система предоставляет подробное логирование настроек скорости:

```
⚡ [test] Скорость из файла: 5 м/с (18.0 км/ч)
⚡ [complex] Используем скорость: 12 м/с (43.2 км/ч)
```

## Рекомендации

1. **Для постоянных настроек:** Используйте параметр `speed` в JSON файлах
2. **Для тестирования:** Используйте параметр `speed` в API запросах
3. **Для стандартных случаев:** Оставляйте значение по умолчанию
4. **Для реалистичности:** Используйте скорости 5-15 м/с (18-54 км/ч) 